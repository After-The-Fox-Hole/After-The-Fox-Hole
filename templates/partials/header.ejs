<header >
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Henny+Penny&family=IBM+Plex+Serif&family=Inter&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/915ab9eecb.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,200" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,200" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Teko&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/styles.css"/>
    <nav class="navbar navbar-expand-lg bg-body-tertiary p-0 shift">
        <div class="container-fluid navBarStyle">
                <a class="navbar-brand me-auto text-center p-2 brandBtn" href="/homepage">
                    <img src="https://drive.google.com/uc?id=1EvHWHowRte3ogRf9IRvmObpsxI07Tmpt" alt="" width="32" height="30" class="d-inline-block align-text-top">
                    After the Foxhole
                </a>
            <button class="navbar-toggler hamburger" type="button" data-bs-toggle="offcanvas" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="offcanvas offcanvas-end navBarStyle" tabindex="-1" id="navbarNav" aria-labelledby="navbarNavLabel">
                <div class="offcanvas-header">
                    <h1 class="offcanvas-title" id="navbarNavLabel">What would you like to do?</h1>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav ms-auto ">
                        <% if (typeof user === 'undefined') { %>
                            <li class="nav-item">
                                <a class="nav-link active universalHead p-2" aria-current="page" href="/about">About Us</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active universalHead p-2" aria-current="page" href="/register">Register</a>
                            </li>
                        <% } else { %>
                            <li class="nav-item">
                                <a class="nav-link universalHead py-auto" aria-current="page" href="/posts/create">Create a Post</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link universalHead py-auto" aria-current="page" href="/events/create" >Create an Event</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle universalHead py-auto" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    My Upcoming Events
                                </a>
                                <ul class="dropdown-menu cardsContainer p-2 ps-2" id="myEvents">
                                    <% user.attending.forEach(function (attending){%>
                                        <% let date = new Date(attending.date);%>
                                        <% let options = {
                                            year: 'numeric',
                                            month: 'short',
                                            day: 'numeric',
                                        };
                                        %>
                                        <% let cardCreated = date.toLocaleString('en-US', options);
                                        %>
                                        <div class="card post my-1 ms-1" style="width: 15rem;">
                                            <div class="card-body theseAreCards">
                                                <a href="/events?id=<%=attending._id%>">
                                                    <h5 class="card-title"><%-attending.title%></h5>
                                                </a>
                                                <p class="card-text event-content"><%-attending.content%></p>
                                                <p class="card-text event-time"><%=cardCreated%></p>
                                            </div>
                                        </div>
                                    <%});%>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link universalHead py-auto" aria-current="page" href="/profile?id=<%=user._id%>">Profile</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link universalHead py-auto" aria-current="page" href="/about">About Us</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link universalHead py-auto" aria-current="page" href="/users/logout" >Logout</a>
                            </li>
                        <% } %>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <script>
		const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    </script>
</header>
